===== HTML: видео, iframe, embed, API. Введение

Вы уже умеете создавать сайты и наполнять их контентом: текстом и картинками. Но современный веб состоит не только из этого. Повсюду медиафайлы: видеоролики, аудиозаписи. Много социальных сервисов: постов из соцсетей, видео с YouTube, виджетов с погодой. Поэтому веб-разработчик должен умело использовать медиафайлы и внешние источники данных.

Об этом мы и расскажем. Сначала рассмотрим, как добавлять сторонние посты, виджеты и файлы на веб-страницу. Затем расскажем о нескольких HTML-тегах для встраивания медиафайлов.

Вы сделаете проект о путешествии по Транссибирской магистрали и наполните его информацией с популярных сервисов. Вы соберёте «копилку путешественника»: расписание, музыку в дорогу, книжку и так далее. Для этого вы создадите фреймы и встроите на свою страницу видео, аудио и виджеты-информеры. Вы узнаете, что такое API и подключите скрипт, который будет имитировать путешествие по Транссибу: при вертикальной прокрутке в меню будет отображаться время в пути и количество преодолённых километров.

Это не самая сложная тема в спринте, но одна из самых интересных и актуальных, потому что сложно представить современный веб без медиафайлов и взаимодействия между сервисами.

===== iframe

По-английски iframe — сокращение от inline frame, что значит «встроенная в строку рамка». Это контейнер, в который помещают информацию с других сайтов. По сути — обычный элемент страницы. Можно задать ему ширину и высоту: в рамке таких размеров и будет отображаться подгружаемая информация. В текстах на русском языке элемент с тегом iframe часто называют словом «фрейм».

Атрибуты тега iframe
height — высота фрейма в пикселях:
  <iframe height="250px"></iframe>
width — ширина в пикселях:
  <iframe width="250px"></iframe>
src — ссылка на веб-страницу, откуда поступают данные:
  <iframe src="https://music.yandex.ru/iframe/#track/41284288/5400781/"></iframe>
allowfullscreen — разрешает полноэкранный режим:
  <iframe width="100%" allowfullscreen src="https://music.yandex.ru/iframe/#track/41284288/5400781/"></iframe>

frameborder — это устаревший атрибут, он отображает вокруг содержимого фрейма рамку с эффектом трёхмерности. По умолчанию рамка рисуется и значение этого атрибута frameborder="1". Значение "0" её скрывает.

В HTML5 не применяют этот атрибут, а управляют рамкой через свойство border в CSS. Но frameborder встречается в популярных готовых фреймах, к примеру — в коде вставки видео с Youtube. Вам нужно знать этот атрибут, чтобы найти его и удалить, иначе валидатор выдаст ошибку.
  <iframe frameborder="0" width="600" height="100" src="https://music.yandex.ru/iframe/#track/41284288/5400781/"></iframe>
  
Начнём вёрстку макета. Проект будет посвящён Транссибирской магистрали.

-----

Переходите на Яндекс.Музыку: https://music.yandex.ru/home.
Вы можете выбрать любой плейлист. Главное, чтобы внешний вид соответствовал макету.
Например, найдите в поиске исполнителя A$AP ROCKY. Среди его плейлистов, указаных правее композиций и альбомов, в верхнем меню выберите «Лучшее: A$AP ROCKY».
Наведите на него мышь и кликните пиктограмму со стрелочкой «Поделиться»:
image
Или сразу перейдите по ссылке на плейлист: https://music.yandex.ru/users/yamusic-bestsongs/playlists/631822, кликните на иконку с многоточием и нажмите «Поделиться».
Во всплывающем меню выберите «HTML-код». Откроется окно с конструктором, где можно задать размеры фрейма, его оформление, а после скопировать HTML-код.

-----

Мы предлагаем почитать о понятии Икигай и узнать, как стать самым счастливым человеком. По крайней мере, на время путешествия и хотя бы в пределах бесплатного предпросмотра.
Эта книга доступна по ссылке: https://www.amazon.com/Ikigai-Japanese-Philosophy-Alan-Daron-ebook/dp/B07BPGCS41/ref=pd_sim_351_1/143-1361162-3352612
Код для вставки iframe - его мы подготовили специально для урока:
<iframe type="text/html" width="336" height="550" frameborder="0" allowfullscreen style="max-width:100%" src="https://read.amazon.com/kp/card?asin=B005M2AHWM&preview=inline&linkCode=kpe&ref_=cm_sw_r_kb_dp_oo3HFb3VS6TAM" ></iframe> 
Вставьте код фрейма в раздел «Что почитать» нашего проекта. Управляйте в теге iframe значениями атрибутов width и height.

----- 

В социальных сетях есть много разных iframe, которые вы можете использовать в своих проектах. Здесь мы сошлёмся на пост в Facebook. Как это сделать, описано на официальном сайте Facebook для разработчиков: https://developers.facebook.com/docs/plugins/page-plugin/.
Можете написать свой пост и добавить его в проект. Мы для примера предлагаем использовать этот:
https://www.facebook.com/Drachiosaurus/posts/1857733597882973
Откройте этот пост и кликните справа пиктограмму с многоточием. Она доступна, если у вас есть аккаунт на Facebook. А если нет, сразу скопируйте в буфер код:
<iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FDrachiosaurus%2Fposts%2F1857733597882973&width=500" width="500" height="688" style="border:none;overflow:hidden" scrolling="no" allowtransparency="true" allow="encrypted-media"></iframe> 
Появится всплывающее меню:
Выберите пункт «Встроить». При клике откроется код, готовый для использования в проекте. Вставьте его в раздел «Мой отчёт».

!!! Содержимое айфреймов часто может нарушать адаптивные разметки, потому что имеет фиксированные ширину и высоту. В таких случаях лучше задать размеры фрейма в процентах.

-----

ы разобрали возможные трудности в работе с iframe. Продолжим вёрстку проекта. Будет здорово знать, откуда и куда мы едем. Для этого добавим карту.
У Яндекс.Карт есть конструктор создания карт: https://yandex.ru/map-constructor/
Выберите «Создать карту» → «Новая карта».
Придумайте заголовок и введите его в поле «Название».
Теперь создадим метки для отправного и конечного пунктов путешествия. В поле «Найти» введите Москва (ставим метку на неё, нажимаем на кнопку «Готово»). Далее то же самое с Владивостоком. Можно выбрать внешний вид меток и сделать их для каждого города, где будут остановки.
После этого нажмите «Линии». Соедините метки линией, начав от Москвы и до Владивостока. Когда линия вас устроит, выбирайте «Завершить» и «Готово».
Если карта выглядит так, как вам нужно — нажмите «Сохранить и продолжить». Для встраивания выберите опцию «Статическая карта». Задайте ей нужные размеры. Теперь нажмите кнопку «Получить код карты». Яндекс предложит код ссылки, который надо вставить в HTML-файл вашего проекта.

===== Кроссбраузерность iframe

Проверим на сайте Can I Use, какие браузеры поддерживают фрейм. Зайдите на сайт и введите iframe в окно, рядом со знаком вопроса.

Красный цвет ячейки показывает, что Internet Explorer 11 не поддерживает фреймы.

Один из способов разрешения этой ситуации — разместить информацию для пользователей между двумя тегами <iframe>:

  <iframe>Здравствуйте, ваш браузер не может показать классную штуку, потому что не поддерживает iframe.</iframe>  

Пользователь с Internet Explorer не посмотрит видео, но увидит текст, написанный между тегов <iframe></iframe>. Мы делаем это для того, чтобы пользователь не пугался при виде пустого блока.

Такой подход допустим при работе со старыми браузерами. Он описан в документации HTML (W3C https://www.w3.org/TR/2011/WD-html5-20110525/the-iframe-element.html#the-iframe-element , WHATWG https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element ). Тем не менее, W3C-валидатор https://validator.w3.org/ укажет на ошибку, когда встретит код с текстом внутри фрейма. То ли разработчики валидатора смотрят в будущее, где нет устаревших браузеров, то ли проблема связана с особенностью работы сервиса. Учитывайте эту особенность в работе и отталкивайтесь от задачи. Если нужно не получить ошибок от валидатора, не пишите текст внутри фрейма. Если важнее поддерживать старые браузеры — пишите. В заданиях вы проделаете это упражнение, несмотря на любые неопределённости.

Бывает, что вы сделали фрейм по правилам, а он всё равно не отображается. Скорее всего, разработчик запретил показ своего ресурса во фреймах сторонних сайтов.
Если создатель сайта запретил показ своего фрейма на других ресурсах, в консоль разработчика будет выведено сообщение об ошибке.

image

Решение этой проблемы — связаться с разработчиком сайта и попросить его дать разрешение на встраивание контента.

Сейчас альтернативный текст есть только у фрейма Яндекс.Музыки. Остальным фреймам нужно его написать.
Добавьте такие альтернативные тексты:
для фрейма с сайта Amazon — Книга для чтения в пути;
для поста из Фейсбука — Публикация в Facebook о поездке по Транссибирской магистрали.

===== Виджеты-информеры